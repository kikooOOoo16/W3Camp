<% include ../partials/header %>

<div class="row forum-banner">
    <div class="bg-secondary col-12">
        <h3 class="mt-4 mb-4 title-forum">W3Camp forum</h3>
    </div>
</div>
<div class="container sample-section-wrap">
    <div class="row sample-section">
        <div class="col-md-10">
            <a href="/forumTopics/new" class="btn btn-secondary btn-sm mb-3"><i class="fas fa-pencil-alt"></i> New topic</a>
            <a href="/campgrounds" class="btn btn-secondary btn-sm mb-3"><i class="far fa-arrow-alt-circle-left"></i> Back</a>
            <div class="table-responsive mb-4">
                <table class="table table-hover">
                    <thead class="thead-forum">
                        <tr>
                            <th colspan="3">Site information</th>
                        </tr>
                    </thead>
                    <tbody class="forum-tbody">
                        <% var counter = false; %>
                        <% forumTopic.forEach(function(disscusionTopic){ %>
                            <% if (typeof disscusionTopic.topic !== 'undefined' && disscusionTopic.topic === "Site information") { %>
                                <% counter = true; %>
                                <tr>
                                    <td>
                                        <div class="forum-table-link">
                                            <a href="/forumTopics/<%= disscusionTopic._id %>"><%= disscusionTopic.name %></a>
                                        </div>
                                    </td>
                                    <td>
                                        <div class="d-flex flex-row justify-content-end">
                                            <div class="forum-table-author">
                                                By: <%= disscusionTopic.author.username %>
                                            </div>
                                            <div class="forum-date">
                                                Created : <%= moment(disscusionTopic.createdAt).fromNow() %>
                                            </div>
                                        </div>
                                    </td>
                                </tr>
                            <% } %>
                        <% }); %>
                        <% if (!counter || typeof forumTopic === "undefined") { %>
                            <tr>
                                <td>There are no topics for this category yet.</td>
                            </tr>
                        <% } else if (counter) { counter = true }%>
                        <%  /*console.log(JSON.stringify("Counter " + counter, null, '\t'))*/ %>
                    </tbody>
                </table>
            </div>
            <div class="table-responsive mb-4">
                <table class="table table-hover">
                    <thead class="thead-forum">
                        <tr>
                            <th colspan="3">Campground discussions</th>
                        </tr>
                    </thead>
                    <tbody class="forum-tbody">
                        <% var counter = false; %>
                        <% forumTopic.forEach(function(disscusionTopic){ %>
                            <% if (typeof disscusionTopic.topic !== 'undefined' && disscusionTopic.topic === "Campground discussions") { %>
                                <% counter = true; %>
                                 <tr>
                                    <td>
                                        <div class="forum-table-link">
                                            <a href="/forumTopics/<%= disscusionTopic._id %>"><%= disscusionTopic.name %></a>
                                        </div>
                                    </td>
                                    <td>
                                        <div class="d-flex flex-row justify-content-end">
                                            <div class="forum-table-author">
                                                By: <%= disscusionTopic.author.username %>
                                            </div>
                                            <div class="forum-date">
                                                Created : <%= moment(disscusionTopic.createdAt).fromNow() %>
                                            </div>
                                        </div>
                                    </td>
                                </tr>
                            <% } %>
                        <% }); %>
                        <% if (!counter || typeof forumTopic === "undefined") { %>
                            <tr>
                                <td>There are no topics for this category yet.</td>
                            </tr>
                        <% } else if (counter) { counter = true }%>
                        <%  /*console.log(JSON.stringify("Counter " + counter, null, '\t'))*/ %>
                    </tbody>
                </table>
            </div>
            <div class="table-responsive mb-4">
                <table class="table table-hover">
                    <thead class="thead-forum"> 
                        <tr>
                            <th colspan="3">General</th>
                        </tr>
                    </thead class="forum-tbody">
                        <tbody class="forum-tbody">
                        <% var counter = false; %>
                        <% forumTopic.forEach(function(disscusionTopic){ %>
                            <% if (typeof disscusionTopic.topic !== 'undefined' && disscusionTopic.topic === "General") { %>
                                <% counter = true; %>
                                <tr>
                                    <td>
                                        <div class="forum-table-link">
                                            <a href="/forumTopics/<%= disscusionTopic._id %>"><%= disscusionTopic.name %></a>
                                        </div>
                                    </td>
                                    <td>
                                        <div class="d-flex flex-row justify-content-end">
                                            <div class="forum-table-author">
                                                By: <%= disscusionTopic.author.username %>
                                            </div>
                                            <div class="forum-date">
                                                Created : <%= moment(disscusionTopic.createdAt).fromNow() %>
                                            </div>
                                        </div>
                                    </td>
                                </tr>
                            <% } %>
                        <% }); %>
                        <% if (!counter || typeof forumTopic === "undefined") { %>
                            <tr>
                                <td>There are no topics for this category yet.</td>
                            </tr>
                        <% } else if (counter) { counter = true }%>
                        <%  /*console.log(JSON.stringify("Counter " + counter, null, '\t'))*/ %>
                    </tbody>
                </table>
            </div>
        </div>
    </div>
</div>

<% include ../partials/footer %>