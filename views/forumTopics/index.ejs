<% include ../partials/header %>

<div class="container">
    <div class="row">
        <div class="col-md-10">
            <h3 class="mt-4 mb-4">W3Camp forums</h3>
            <a href="/forumTopics/new" class="btn btn-info btn-sm mb-3"><i class="fas fa-pencil-alt"></i> New topic</a>
            <table class="table table-hover mb-4">
                <thead class="thead-dark">
                    <tr>
                        <th colspan="3">Site information</th>
                    </tr>
                </thead>
                <tbody>
                    <% var counter = false; %>
                    <% forumTopic.forEach(function(disscusionTopic){ %>
                        <% if (typeof disscusionTopic.topic !== 'undefined' && disscusionTopic.topic === "Site information") { %>
                            <% counter = true; %>
                            <tr>
                                <td><a href="/forumTopics/<%= disscusionTopic._id %>"><%= disscusionTopic.name %></a></td>
                                <td>By: <%= disscusionTopic.author.username %></td>
                                <td>Created : <%= moment(disscusionTopic.createdAt).fromNow() %></td>
                            </tr>
                        <% } %>
                    <% }); %>
                    <% if (!counter || typeof forumTopic === "undefined") { %>
                        <tr>
                            <td>There are no topics for this category yet.</td>
                        </tr>
                    <% } else if (counter) { counter = true }%>
                    <%  /*console.log(JSON.stringify("Counter " + counter, null, '\t'))*/ %>
                </tbody>
            </table>
            <table class="table table-hover mb-4">
                <thead class="thead-dark">
                    <tr>
                        <th colspan="3">Campground discussions</th>
                    </tr>
                </thead>
                <tbody>
                    <% var counter = false; %>
                    <% forumTopic.forEach(function(disscusionTopic){ %>
                        <% if (typeof disscusionTopic.topic !== 'undefined' && disscusionTopic.topic === "Campground discussions") { %>
                            <% counter = true; %>
                            <tr>
                                <td><a href="/forumTopics/<%= disscusionTopic._id %>"><%= disscusionTopic.name %></a></td>
                                <td>By: <%= disscusionTopic.author.username %></td>
                                <td>Created : <%= moment(disscusionTopic.createdAt).fromNow() %></td>
                            </tr>
                        <% } %>
                    <% }); %>
                    <% if (!counter || typeof forumTopic === "undefined") { %>
                        <tr>
                            <td>There are no topics for this category yet.</td>
                        </tr>
                    <% } else if (counter) { counter = true }%>
                    <%  /*console.log(JSON.stringify("Counter " + counter, null, '\t'))*/ %>
                </tbody>
            </table>
            <table class="table table-hover mb-4">
                <thead class="thead-dark"> 
                    <tr>
                        <th colspan="3">General</th>
                    </tr>
                </thead>
                                <tbody>
                    <% var counter = false; %>
                    <% forumTopic.forEach(function(disscusionTopic){ %>
                        <% if (typeof disscusionTopic.topic !== 'undefined' && disscusionTopic.topic === "General") { %>
                            <% counter = true; %>
                            <tr>
                                <td><a href="/forumTopics/<%= disscusionTopic._id %>"><%= disscusionTopic.name %></a></td>
                                <td>By: <%= disscusionTopic.author.username %></td>
                                <td>Created : <%= moment(disscusionTopic.createdAt).fromNow() %></td>
                            </tr>
                        <% } %>
                    <% }); %>
                    <% if (!counter || typeof forumTopic === "undefined") { %>
                        <tr>
                            <td>There are no topics for this category yet.</td>
                        </tr>
                    <% } else if (counter) { counter = true }%>
                    <%  /*console.log(JSON.stringify("Counter " + counter, null, '\t'))*/ %>
                </tbody>
            </table>
        </div>
    </div>
</div>

<% include ../partials/footer %>